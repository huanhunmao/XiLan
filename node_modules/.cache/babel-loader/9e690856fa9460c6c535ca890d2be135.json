{"ast":null,"code":"var _jsxFileName = \"/Users/fhj/Desktop/github-pr/ms-/xilan/src/components/Menu/menu.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, createContext } from \"react\";\nimport classNames from \"classnames\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// createContext 创建并传入初始值 \nexport const MenuContext = /*#__PURE__*/createContext({\n  index: 0\n});\n\nconst Menu = props => {\n  _s();\n\n  const {\n    defaultIndex,\n    className,\n    mode,\n    style,\n    onSelect,\n    children\n  } = props; // 使用useState\n\n  const [currentActive, setActive] = useState(defaultIndex);\n  const classes = classNames('menu-vertical', className, {\n    'menu-vertical': mode === 'vertical'\n  }); // 纵向\n  // 点击事件 如果选择了 设置当前index 为 active状态\n\n  const handleClick = index => {\n    setActive(index);\n\n    if (onSelect) {\n      onSelect(index);\n    }\n  };\n\n  const passedContext = {\n    index: currentActive ? currentActive : 0,\n    onSelect: handleClick\n  };\n\n  const renderChildren = () => {\n    return React.Children.map(children, (child, index) => {\n      const chidElement = child;\n      const {\n        displayName\n      } = chidElement.type;\n\n      if (displayName === 'MenuItem') {\n        return /*#__PURE__*/React.cloneElement(chidElement, {\n          index\n        });\n      } else {\n        console.error('Warnning: node err');\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"ul\", {\n    className: classes,\n    style: style,\n    \"data-testid\": \"test-menu\",\n    children: /*#__PURE__*/_jsxDEV(MenuContext.Provider, {\n      value: passedContext,\n      children: renderChildren()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 13\n  }, this);\n};\n\n_s(Menu, \"yJHh0VCthB4k6tr+jB2/to3gr38=\");\n\n_c = Menu;\nMenu.defaultProps = {\n  defaultIndex: 0,\n  mode: 'horizontal' // 默认横向\n\n};\nexport default Menu;\n\nvar _c;\n\n$RefreshReg$(_c, \"Menu\");","map":{"version":3,"sources":["/Users/fhj/Desktop/github-pr/ms-/xilan/src/components/Menu/menu.tsx"],"names":["React","useState","createContext","classNames","MenuContext","index","Menu","props","defaultIndex","className","mode","style","onSelect","children","currentActive","setActive","classes","handleClick","passedContext","renderChildren","Children","map","child","chidElement","displayName","type","cloneElement","console","error","defaultProps"],"mappings":";;;AAAA,OAAOA,KAAP,IAAcC,QAAd,EAAuBC,aAAvB,QAA4C,OAA5C;AACA,OAAOC,UAAP,MAAuB,YAAvB;;AAoBA;AACA,OAAO,MAAMC,WAAW,gBAAGF,aAAa,CAAe;AAACG,EAAAA,KAAK,EAAC;AAAP,CAAf,CAAjC;;AACP,MAAMC,IAA0B,GAAIC,KAAD,IAAW;AAAA;;AAC1C,QAAM;AACFC,IAAAA,YADE;AAEFC,IAAAA,SAFE;AAGFC,IAAAA,IAHE;AAIFC,IAAAA,KAJE;AAKFC,IAAAA,QALE;AAMFC,IAAAA;AANE,MAODN,KAPL,CAD0C,CAS1C;;AACA,QAAM,CAACO,aAAD,EAAeC,SAAf,IAA4Bd,QAAQ,CAACO,YAAD,CAA1C;AACA,QAAMQ,OAAO,GAAGb,UAAU,CAAC,eAAD,EAAkBM,SAAlB,EACtB;AAAC,qBAAiBC,IAAI,KAAK;AAA3B,GADsB,CAA1B,CAX0C,CAYE;AAE5C;;AACA,QAAMO,WAAW,GAAIZ,KAAD,IAAoB;AACpCU,IAAAA,SAAS,CAACV,KAAD,CAAT;;AACA,QAAGO,QAAH,EAAY;AACRA,MAAAA,QAAQ,CAACP,KAAD,CAAR;AACH;AACJ,GALD;;AAMA,QAAMa,aAA4B,GAAG;AACjCb,IAAAA,KAAK,EAAGS,aAAa,GAAGA,aAAH,GAAmB,CADP;AAEjCF,IAAAA,QAAQ,EAAGK;AAFsB,GAArC;;AAID,QAAME,cAAc,GAAG,MAAM;AACzB,WACInB,KAAK,CAACoB,QAAN,CAAeC,GAAf,CAAmBR,QAAnB,EAA6B,CAACS,KAAD,EAAQjB,KAAR,KAAkB;AAC9C,YAAMkB,WAAW,GAAGD,KAApB;AACA,YAAM;AAACE,QAAAA;AAAD,UAAgBD,WAAW,CAACE,IAAlC;;AACA,UAAGD,WAAW,KAAK,UAAnB,EAA8B;AAC1B,4BAAOxB,KAAK,CAAC0B,YAAN,CAAmBH,WAAnB,EAAgC;AACnClB,UAAAA;AADmC,SAAhC,CAAP;AAGH,OAJD,MAIK;AACDsB,QAAAA,OAAO,CAACC,KAAR,CAAc,oBAAd;AACH;AACD,KAVD,CADJ;AAaH,GAdD;;AAeK,sBACI;AAAI,IAAA,SAAS,EAAEZ,OAAf;AAAwB,IAAA,KAAK,EAAIL,KAAjC;AAAwC,mBAAY,WAApD;AAAA,2BACI,QAAC,WAAD,CAAa,QAAb;AAAsB,MAAA,KAAK,EAAEO,aAA7B;AAAA,gBACCC,cAAc;AADf;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,UADJ;AAOP,CA/CD;;GAAMb,I;;KAAAA,I;AAiDNA,IAAI,CAACuB,YAAL,GAAoB;AAChBrB,EAAAA,YAAY,EAAG,CADC;AAEhBE,EAAAA,IAAI,EAAG,YAFS,CAEI;;AAFJ,CAApB;AAKA,eAAeJ,IAAf","sourcesContent":["import React,{useState,createContext}  from \"react\";\nimport classNames from \"classnames\";\nimport { MenuItemProps } from \"./menuItem\";\n\n\ntype MenuMode = 'horizontal' | 'vertical'; //  这个表示横向 ｜ 纵向 模式\n// 定义 onSelect 类型方便下面使用\ntype SelectCallback = (selectedIndex: number) => void\nexport interface MenuProps {\n    defaultIndex ?: number;\n    className ?: string;\n    mode ?: MenuMode;\n    style ?: React.CSSProperties;\n    onSelect ?: SelectCallback\n}\n\ninterface IMenuContext {\n    index : number\n    onSelect ?: SelectCallback\n}\n\n// createContext 创建并传入初始值 \nexport const MenuContext = createContext<IMenuContext>({index:0})\nconst Menu : React.FC<MenuProps> = (props) => {\n    const {\n        defaultIndex,\n        className,\n        mode,\n        style,\n        onSelect,\n        children\n    } =  props\n    // 使用useState\n    const [currentActive,setActive] = useState(defaultIndex)\n    const classes = classNames('menu-vertical' ,className,\n        {'menu-vertical': mode === 'vertical'}) // 纵向\n    \n    // 点击事件 如果选择了 设置当前index 为 active状态\n    const handleClick = (index : number) => {\n        setActive(index);\n        if(onSelect){\n            onSelect(index)\n        }\n    }\n    const passedContext : IMenuContext = {\n        index : currentActive ? currentActive : 0,\n        onSelect : handleClick\n    }\n   const renderChildren = () => {\n       return (\n           React.Children.map(children, (child, index) => {\n            const chidElement = child as React.FunctionComponentElement<MenuItemProps>;\n            const {displayName} = chidElement.type;\n            if(displayName === 'MenuItem'){\n                return React.cloneElement(chidElement, {\n                    index\n                })\n            }else{\n                console.error('Warnning: node err');\n            }\n           })\n       )\n   }\n        return (\n            <ul className={classes} style = {style} data-testid=\"test-menu\">\n                <MenuContext.Provider value={passedContext}>\n                {renderChildren()}\n                </MenuContext.Provider>\n            </ul>\n        )\n}\n\nMenu.defaultProps = {\n    defaultIndex : 0,\n    mode : 'horizontal' // 默认横向\n}\n\nexport default Menu;"]},"metadata":{},"sourceType":"module"}
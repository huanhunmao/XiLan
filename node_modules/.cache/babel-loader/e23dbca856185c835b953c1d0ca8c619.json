{"ast":null,"code":"var _jsxFileName = \"/Users/fhj/Desktop/github-pr/ms-/xilan/src/components/Menu/menu.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, createContext } from \"react\";\nimport classNames from \"classnames\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// createContext 创建并传入初始值 \nexport const MenuContext = /*#__PURE__*/createContext({\n  index: '0'\n});\n\nconst Menu = props => {\n  _s();\n\n  const {\n    defaultIndex,\n    className,\n    mode,\n    style,\n    onSelect,\n    children\n  } = props; // 使用useState\n\n  const [currentActive, setActive] = useState(defaultIndex);\n  const classes = classNames('viking-menu', className, {\n    'menu-vertical': mode === 'vertical',\n    'menu-horizontal': mode !== 'horizontal'\n  }); // 纵向\n  // 点击事件 如果选择了 设置当前index 为 active状态\n\n  const handleClick = index => {\n    setActive(index);\n\n    if (onSelect) {\n      onSelect(index);\n    }\n  };\n\n  const passedContext = {\n    index: currentActive ? currentActive : '0',\n    onSelect: handleClick,\n    mode: mode\n  };\n\n  const renderChildren = () => {\n    return React.Children.map(children, (child, index) => {\n      const childElement = child;\n      const {\n        displayName\n      } = childElement.type;\n\n      if (displayName === 'MenuItem' || displayName === 'SubMenu') {\n        return /*#__PURE__*/React.cloneElement(childElement, {\n          index\n        });\n      } else {\n        console.error('Warnning: node err');\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"ul\", {\n    className: classes,\n    style: style,\n    \"data-testid\": \"test-menu\",\n    children: /*#__PURE__*/_jsxDEV(MenuContext.Provider, {\n      value: passedContext,\n      children: renderChildren()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 13\n  }, this);\n};\n\n_s(Menu, \"yJHh0VCthB4k6tr+jB2/to3gr38=\");\n\n_c = Menu;\nMenu.defaultProps = {\n  defaultIndex: '0',\n  mode: 'horizontal' // 默认横向\n\n};\nexport default Menu;\n\nvar _c;\n\n$RefreshReg$(_c, \"Menu\");","map":{"version":3,"sources":["/Users/fhj/Desktop/github-pr/ms-/xilan/src/components/Menu/menu.tsx"],"names":["React","useState","createContext","classNames","MenuContext","index","Menu","props","defaultIndex","className","mode","style","onSelect","children","currentActive","setActive","classes","handleClick","passedContext","renderChildren","Children","map","child","childElement","displayName","type","cloneElement","console","error","defaultProps"],"mappings":";;;AAAA,OAAOA,KAAP,IAAcC,QAAd,EAAuBC,aAAvB,QAA4C,OAA5C;AACA,OAAOC,UAAP,MAAuB,YAAvB;;AAqBA;AACA,OAAO,MAAMC,WAAW,gBAAGF,aAAa,CAAe;AAACG,EAAAA,KAAK,EAAC;AAAP,CAAf,CAAjC;;AACP,MAAMC,IAA0B,GAAIC,KAAD,IAAW;AAAA;;AAC1C,QAAM;AACFC,IAAAA,YADE;AAEFC,IAAAA,SAFE;AAGFC,IAAAA,IAHE;AAIFC,IAAAA,KAJE;AAKFC,IAAAA,QALE;AAMFC,IAAAA;AANE,MAODN,KAPL,CAD0C,CAS1C;;AACA,QAAM,CAACO,aAAD,EAAeC,SAAf,IAA4Bd,QAAQ,CAACO,YAAD,CAA1C;AACA,QAAMQ,OAAO,GAAGb,UAAU,CAAC,aAAD,EAAgBM,SAAhB,EACtB;AAAC,qBAAiBC,IAAI,KAAK,UAA3B;AACA,uBAAmBA,IAAI,KAAK;AAD5B,GADsB,CAA1B,CAX0C,CAcvC;AAEH;;AACA,QAAMO,WAAW,GAAIZ,KAAD,IAAoB;AACpCU,IAAAA,SAAS,CAACV,KAAD,CAAT;;AACA,QAAGO,QAAH,EAAY;AACRA,MAAAA,QAAQ,CAACP,KAAD,CAAR;AACH;AACJ,GALD;;AAMA,QAAMa,aAA4B,GAAG;AACjCb,IAAAA,KAAK,EAAGS,aAAa,GAAGA,aAAH,GAAmB,GADP;AAEjCF,IAAAA,QAAQ,EAAGK,WAFsB;AAGjCP,IAAAA,IAAI,EAACA;AAH4B,GAArC;;AAKD,QAAMS,cAAc,GAAG,MAAM;AACzB,WAEInB,KAAK,CAACoB,QAAN,CAAeC,GAAf,CAAmBR,QAAnB,EAA6B,CAACS,KAAD,EAAQjB,KAAR,KAAkB;AAC9C,YAAMkB,YAAY,GAAGD,KAArB;AACA,YAAM;AAACE,QAAAA;AAAD,UAAgBD,YAAY,CAACE,IAAnC;;AACA,UAAGD,WAAW,KAAK,UAAhB,IAA8BA,WAAW,KAAK,SAAjD,EAA2D;AACvD,4BAAOxB,KAAK,CAAC0B,YAAN,CAAmBH,YAAnB,EAAiC;AACpClB,UAAAA;AADoC,SAAjC,CAAP;AAGH,OAJD,MAIK;AACDsB,QAAAA,OAAO,CAACC,KAAR,CAAc,oBAAd;AACH;AACD,KAVD,CAFJ;AAcH,GAfD;;AAgBK,sBACI;AAAI,IAAA,SAAS,EAAEZ,OAAf;AAAwB,IAAA,KAAK,EAAIL,KAAjC;AAAwC,mBAAY,WAApD;AAAA,2BACI,QAAC,WAAD,CAAa,QAAb;AAAsB,MAAA,KAAK,EAAEO,aAA7B;AAAA,gBACCC,cAAc;AADf;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,UADJ;AAOP,CAnDD;;GAAMb,I;;KAAAA,I;AAqDNA,IAAI,CAACuB,YAAL,GAAoB;AAChBrB,EAAAA,YAAY,EAAG,GADC;AAEhBE,EAAAA,IAAI,EAAG,YAFS,CAEI;;AAFJ,CAApB;AAKA,eAAeJ,IAAf","sourcesContent":["import React,{useState,createContext}  from \"react\";\nimport classNames from \"classnames\";\nimport { MenuItemProps } from \"./menuItem\";\n\n\ntype MenuMode = 'horizontal' | 'vertical'; //  这个表示横向 ｜ 纵向 模式\n// 定义 onSelect 类型方便下面使用\ntype SelectCallback = (selectedIndex: string) => void\nexport interface MenuProps {\n    defaultIndex ?: string;\n    className ?: string;\n    mode ?: MenuMode;\n    style ?: React.CSSProperties;\n    onSelect ?: SelectCallback\n}\n\ninterface IMenuContext {\n    index : string\n    onSelect ?: SelectCallback,\n    mode ?: MenuMode\n}\n\n// createContext 创建并传入初始值 \nexport const MenuContext = createContext<IMenuContext>({index:'0'})\nconst Menu : React.FC<MenuProps> = (props) => {\n    const {\n        defaultIndex,\n        className,\n        mode,\n        style,\n        onSelect,\n        children\n    } =  props\n    // 使用useState\n    const [currentActive,setActive] = useState(defaultIndex)\n    const classes = classNames('viking-menu' ,className,\n        {'menu-vertical': mode === 'vertical', \n        'menu-horizontal': mode !== 'horizontal'\n    }) // 纵向\n    \n    // 点击事件 如果选择了 设置当前index 为 active状态\n    const handleClick = (index : string) => {\n        setActive(index);\n        if(onSelect){\n            onSelect(index)\n        }\n    }\n    const passedContext : IMenuContext = {\n        index : currentActive ? currentActive : '0',\n        onSelect : handleClick,\n        mode:mode\n    }\n   const renderChildren = () => {\n       return (\n         \n           React.Children.map(children, (child, index) => {\n            const childElement = child as React.FunctionComponentElement<MenuItemProps>;\n            const {displayName} = childElement.type;\n            if(displayName === 'MenuItem' || displayName === 'SubMenu'){\n                return React.cloneElement(childElement, {\n                    index\n                })\n            }else{\n                console.error('Warnning: node err');\n            }\n           })\n       )\n   }\n        return (\n            <ul className={classes} style = {style} data-testid=\"test-menu\">\n                <MenuContext.Provider value={passedContext}>\n                {renderChildren()}\n                </MenuContext.Provider>\n            </ul>\n        )\n}\n\nMenu.defaultProps = {\n    defaultIndex : '0',\n    mode : 'horizontal' // 默认横向\n}\n\nexport default Menu;"]},"metadata":{},"sourceType":"module"}